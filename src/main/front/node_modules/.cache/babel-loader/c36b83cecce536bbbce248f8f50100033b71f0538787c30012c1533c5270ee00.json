{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Route,Routes,Link,useNavigate}from'react-router-dom';import styled from'styled-components';import Home from'./pages/Home';import Login from'./pages/Login';import SignUp from'./pages/SignUp';import MyReviews from'./pages/MyReviews';import Search from'./pages/Search';import MyInfo from'./pages/MyInfo';import homeIcon from'./assets/home_icon.svg';import reviewIcon from'./assets/review_icon.svg';import profileIcon from'./assets/profile_icon.svg';import axios from'axios';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const App=()=>{return/*#__PURE__*/_jsx(Router,{children:/*#__PURE__*/_jsxs(Container,{children:[/*#__PURE__*/_jsx(Header,{children:/*#__PURE__*/_jsx(TopBar,{})}),/*#__PURE__*/_jsx(Footer,{children:/*#__PURE__*/_jsxs(NavBar,{children:[/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/\",children:[/*#__PURE__*/_jsx(NavIcon,{src:homeIcon,alt:\"\\uD648 \\uC544\\uC774\\uCF58\"}),/*#__PURE__*/_jsx(NavText,{children:\"\\uD648\"})]})}),/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/reviews\",children:[/*#__PURE__*/_jsx(NavIcon,{src:reviewIcon,alt:\"\\uB9AC\\uBDF0 \\uC544\\uC774\\uCF58\"}),/*#__PURE__*/_jsx(NavText,{children:\"\\uB0B4 \\uB9AC\\uBDF0\"})]})}),/*#__PURE__*/_jsx(NavItem,{children:/*#__PURE__*/_jsxs(NavLink,{to:\"/info\",children:[/*#__PURE__*/_jsx(NavIcon,{src:profileIcon,alt:\"\\uD504\\uB85C\\uD544 \\uC544\\uC774\\uCF58\"}),/*#__PURE__*/_jsx(NavText,{children:\"\\uB0B4 \\uC815\\uBCF4\"})]})})]})}),/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/reviews\",element:/*#__PURE__*/_jsx(MyReviews,{})}),/*#__PURE__*/_jsx(Route,{path:\"/info\",element:/*#__PURE__*/_jsx(MyInfo,{})}),/*#__PURE__*/_jsx(Route,{path:\"/search\",element:/*#__PURE__*/_jsx(Search,{})})]})]})});};const TopBar=()=>{const navigate=useNavigate();const[isLoggedIn,setIsLoggedIn]=useState(false);useEffect(()=>{// 서버에 로그인 상태를 확인하는 요청\nconst checkLoginStatus=async()=>{try{const response=await axios.get('http://localhost:8080/api/check-login',{withCredentials:true// 쿠키를 포함하여 요청\n});if(response.status===200){setIsLoggedIn(true);// 로그인 상태로 설정\n}else{setIsLoggedIn(false);// 로그인 상태가 아니라고 설정\n}}catch(error){console.error('로그인 상태 확인 실패:',error);setIsLoggedIn(false);}};checkLoginStatus();},[]);/*\r\n      //테스트 코드\r\n      useEffect(() => {\r\n        // 실제 서버 요청 대신 임시로 로그인 상태를 설정\r\n        setIsLoggedIn(true); // 임시로 로그인된 상태로 설정\r\n      }, []); */const handleLogout=async()=>{try{/* await axios.post('http://localhost:8080/api/logout', {}, {\r\n              withCredentials: true, // 쿠키를 포함하여 요청\r\n            }); */setIsLoggedIn(false);// 로그아웃 후 상태 업데이트\nnavigate('/');// 홈 페이지로 이동\n}catch(error){console.error('로그아웃 실패:',error);}};return/*#__PURE__*/_jsx(TopBarContainer,{children:isLoggedIn?/*#__PURE__*/_jsx(StyledLink,{to:\"/\",onClick:handleLogout,children:\"\\uB85C\\uADF8\\uC544\\uC6C3\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(StyledLink,{to:\"/signup\",children:\"\\uD68C\\uC6D0\\uAC00\\uC785\"}),/*#__PURE__*/_jsx(StyledLink,{to:\"/login\",children:\"\\uB85C\\uADF8\\uC778\"})]})});};export default App;// Styled Components\nconst Container=styled.div`\n  font-family: Arial, sans-serif;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  max-width: auto;\n  margin: 0 auto;\n  min-height: 100vh;\n  position: relative;\n  padding-bottom: 60px;\n`;const Header=styled.header`\n  width: 100%;\n  position: absolute;\n  top: 0;\n`;const TopBarContainer=styled.div`\n  display: flex;\n  justify-content: flex-end;\n  padding: 20px 20px;\n  width: 100%;\n  box-sizing: border-box;\n`;const StyledLink=styled(Link)`\n  margin-left: 30px;\n  text-decoration: none;\n  color: black;\n  font-size: 16px;\n  cursor: pointer;\n  \n  &.button {\n    background: none;\n    border: none;\n    padding: 0;\n    font: inherit;\n    color: inherit;\n    cursor: pointer;\n  }\n`;const Footer=styled.footer`\n  position: fixed;\n  bottom: 0;\n  left: 0;\n  width: 100vw;\n  background-color: #f9f9f9;\n  border-top: 1px solid #ccc;\n  padding: 10px 0;\n  z-index: 1000;\n`;const NavBar=styled.div`\n  display: flex;\n  justify-content: space-around;\n  width: 100%;\n  max-width: auto;\n  margin: 0 auto;\n`;const NavItem=styled.div`\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  color: #888;\n`;const NavLink=styled(Link)`\n  text-decoration: none;\n  color: inherit;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n`;const NavIcon=styled.img`\n  width: 24px;\n  height: 24px;\n  margin-bottom: 5px;\n`;const NavText=styled.span`\n  font-size: 14px;\n`;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Route","Routes","Link","useNavigate","styled","Home","Login","SignUp","MyReviews","Search","MyInfo","homeIcon","reviewIcon","profileIcon","axios","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","App","children","Container","Header","TopBar","Footer","NavBar","NavItem","NavLink","to","NavIcon","src","alt","NavText","path","element","navigate","isLoggedIn","setIsLoggedIn","checkLoginStatus","response","get","withCredentials","status","error","console","handleLogout","TopBarContainer","StyledLink","onClick","div","header","footer","img","span"],"sources":["D:/WineProject/DB_TP_2024/src/main/front/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter as Router, Route, Routes, Link, useNavigate } from 'react-router-dom';\r\nimport styled from 'styled-components';\r\nimport Home from './pages/Home';\r\nimport Login from './pages/Login';\r\nimport SignUp from './pages/SignUp';\r\nimport MyReviews from './pages/MyReviews';\r\nimport Search from './pages/Search';\r\nimport MyInfo from './pages/MyInfo';\r\nimport homeIcon from './assets/home_icon.svg';\r\nimport reviewIcon from './assets/review_icon.svg';\r\nimport profileIcon from './assets/profile_icon.svg';\r\nimport axios from 'axios';\r\n\r\nconst App = () => {\r\n    return (\r\n        <Router>\r\n            <Container>\r\n                <Header>\r\n                    <TopBar />\r\n                </Header>\r\n                <Footer>\r\n                    <NavBar>\r\n                        <NavItem>\r\n                            <NavLink to=\"/\">\r\n                                <NavIcon src={homeIcon} alt=\"홈 아이콘\" />\r\n                                <NavText>홈</NavText>\r\n                            </NavLink>\r\n                        </NavItem>\r\n                        <NavItem>\r\n                            <NavLink to=\"/reviews\">\r\n                                <NavIcon src={reviewIcon} alt=\"리뷰 아이콘\" />\r\n                                <NavText>내 리뷰</NavText>\r\n                            </NavLink>\r\n                        </NavItem>\r\n                        <NavItem>\r\n                            <NavLink to=\"/info\">\r\n                                <NavIcon src={profileIcon} alt=\"프로필 아이콘\" />\r\n                                <NavText>내 정보</NavText>\r\n                            </NavLink>\r\n                        </NavItem>\r\n                    </NavBar>\r\n                </Footer>\r\n\r\n                {/* 라우터 설정 */}\r\n                <Routes>\r\n                    <Route path=\"/\" element={<Home />} />\r\n                    <Route path=\"/login\" element={<Login />} />\r\n                    <Route path=\"/signup\" element={<SignUp />} />\r\n                    <Route path=\"/reviews\" element={<MyReviews />} />\r\n                    <Route path=\"/info\" element={<MyInfo />} />\r\n                    <Route path=\"/search\" element={<Search />} />\r\n                </Routes>\r\n            </Container>\r\n        </Router>\r\n    );\r\n};\r\n\r\nconst TopBar = () => {\r\n    const navigate = useNavigate();\r\n    const [isLoggedIn, setIsLoggedIn] = useState(false);\r\n\r\n    useEffect(() => {\r\n        // 서버에 로그인 상태를 확인하는 요청\r\n        const checkLoginStatus = async () => {\r\n            try {\r\n                const response = await axios.get('http://localhost:8080/api/check-login', {\r\n                    withCredentials: true, // 쿠키를 포함하여 요청\r\n                });\r\n                if (response.status === 200) {\r\n                    setIsLoggedIn(true); // 로그인 상태로 설정\r\n                } else {\r\n                    setIsLoggedIn(false); // 로그인 상태가 아니라고 설정\r\n                }\r\n            } catch (error) {\r\n                console.error('로그인 상태 확인 실패:', error);\r\n                setIsLoggedIn(false);\r\n            }\r\n        };\r\n\r\n        checkLoginStatus();\r\n    }, []);\r\n\r\n\r\n    /*\r\n      //테스트 코드\r\n      useEffect(() => {\r\n        // 실제 서버 요청 대신 임시로 로그인 상태를 설정\r\n        setIsLoggedIn(true); // 임시로 로그인된 상태로 설정\r\n      }, []); */\r\n\r\n\r\n    const handleLogout = async () => {\r\n        try {\r\n            /* await axios.post('http://localhost:8080/api/logout', {}, {\r\n              withCredentials: true, // 쿠키를 포함하여 요청\r\n            }); */\r\n            setIsLoggedIn(false); // 로그아웃 후 상태 업데이트\r\n            navigate('/'); // 홈 페이지로 이동\r\n        } catch (error) {\r\n            console.error('로그아웃 실패:', error);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <TopBarContainer>\r\n            {isLoggedIn ? (\r\n                <StyledLink to=\"/\" onClick={handleLogout}>\r\n                    로그아웃\r\n                </StyledLink>\r\n            ) : (\r\n                <>\r\n                    <StyledLink to=\"/signup\">회원가입</StyledLink>\r\n                    <StyledLink to=\"/login\">로그인</StyledLink>\r\n                </>\r\n            )}\r\n        </TopBarContainer>\r\n    );\r\n};\r\n\r\nexport default App;\r\n\r\n// Styled Components\r\nconst Container = styled.div`\r\n  font-family: Arial, sans-serif;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  max-width: auto;\r\n  margin: 0 auto;\r\n  min-height: 100vh;\r\n  position: relative;\r\n  padding-bottom: 60px;\r\n`;\r\n\r\nconst Header = styled.header`\r\n  width: 100%;\r\n  position: absolute;\r\n  top: 0;\r\n`;\r\n\r\nconst TopBarContainer = styled.div`\r\n  display: flex;\r\n  justify-content: flex-end;\r\n  padding: 20px 20px;\r\n  width: 100%;\r\n  box-sizing: border-box;\r\n`;\r\n\r\nconst StyledLink = styled(Link)`\r\n  margin-left: 30px;\r\n  text-decoration: none;\r\n  color: black;\r\n  font-size: 16px;\r\n  cursor: pointer;\r\n  \r\n  &.button {\r\n    background: none;\r\n    border: none;\r\n    padding: 0;\r\n    font: inherit;\r\n    color: inherit;\r\n    cursor: pointer;\r\n  }\r\n`;\r\n\r\nconst Footer = styled.footer`\r\n  position: fixed;\r\n  bottom: 0;\r\n  left: 0;\r\n  width: 100vw;\r\n  background-color: #f9f9f9;\r\n  border-top: 1px solid #ccc;\r\n  padding: 10px 0;\r\n  z-index: 1000;\r\n`;\r\n\r\nconst NavBar = styled.div`\r\n  display: flex;\r\n  justify-content: space-around;\r\n  width: 100%;\r\n  max-width: auto;\r\n  margin: 0 auto;\r\n`;\r\n\r\nconst NavItem = styled.div`\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n  color: #888;\r\n`;\r\n\r\nconst NavLink = styled(Link)`\r\n  text-decoration: none;\r\n  color: inherit;\r\n  display: flex;\r\n  flex-direction: column;\r\n  align-items: center;\r\n`;\r\n\r\nconst NavIcon = styled.img`\r\n  width: 24px;\r\n  height: 24px;\r\n  margin-bottom: 5px;\r\n`;\r\n\r\nconst NavText = styled.span`\r\n  font-size: 14px;\r\n`;"],"mappings":"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B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA3B,MAAM,CAAGpB,MAAM,CAACgD,MAAM;AAC5B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAJ,eAAe,CAAG5C,MAAM,CAAC+C,GAAG;AAClC;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAF,UAAU,CAAG7C,MAAM,CAACF,IAAI,CAAC;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAwB,MAAM,CAAGtB,MAAM,CAACiD,MAAM;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA1B,MAAM,CAAGvB,MAAM,CAAC+C,GAAG;AACzB;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAvB,OAAO,CAAGxB,MAAM,CAAC+C,GAAG;AAC1B;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAAtB,OAAO,CAAGzB,MAAM,CAACF,IAAI,CAAC;AAC5B;AACA;AACA;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAA6B,OAAO,CAAG3B,MAAM,CAACkD,GAAG;AAC1B;AACA;AACA;AACA,CAAC,CAED,KAAM,CAAApB,OAAO,CAAG9B,MAAM,CAACmD,IAAI;AAC3B;AACA,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}